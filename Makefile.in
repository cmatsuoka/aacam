
VERSION	= 0.0.4
DIST	= aacam-$(VERSION)
CC	= @CC@
CFLAGS	= @CFLAGS@ -D_REENTRANT
LD	= @CC@
LDFLAGS	= @LDFLAGS@
BIN	= aacam
LIBS	= @LIBS@
OBJS	= cam.o
DFILES	= Makefile.in README configure configure.in config.h.in \
	  $(OBJS:.o=.c)

.c.o:
	$(CC) -c $(CFLAGS) -o $*.o $<

all: $(BIN)

$(BIN): $(OBJS)
	$(LD) $(LDFLAGS) -o$@ $+ $(LIBS)

clean:
	rm -f core $(OBJS) $(BIN)

distclean: clean
	rm -f Makefile config.h config.cache config.log config.status

dist:
	rm -Rf $(DIST)
	mkdir $(DIST)
	cp $(DFILES) $(DIST)
	tar cvf - $(DIST) | gzip -c > $(DIST).tar.gz
	rm -Rf $(DIST)
	sync
	ls -l $(DIST).tar.gz
